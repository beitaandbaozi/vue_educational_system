(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-85b93fac"],{a8e1:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"dashboard-container"},[r("div",{staticClass:"app-container"},[r("page-tools",{attrs:{"show-before":!0}},[r("span",{attrs:{slot:"before"},slot:"before"},[t._v("共有"+t._s(this.total)+"名学生")]),r("template",{slot:"after"},[r("el-button",{attrs:{size:"small",type:"success"},on:{click:function(e){return t.$router.push("./import?type=student")}}},[t._v("excel导入")]),r("el-button",{attrs:{size:"small",type:"danger"},on:{click:t.excelExport}},[t._v("excel导出")]),r("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.addStudent}},[t._v("新增学生")])],1)],2),r("el-card",[r("el-row",{attrs:{type:"flex"}},[r("el-col",{staticStyle:{"margin-right":"35px"},attrs:{span:6}},[r("el-input",{attrs:{size:"small",placeholder:"请输入学号",clearable:""},on:{clear:t.getAllStudents},model:{value:t.paramsInfo.query,callback:function(e){t.$set(t.paramsInfo,"query",e)},expression:"paramsInfo.query"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.getAllStudents},slot:"append"})],1)],1),r("el-col",{attrs:{span:12}},[r("el-col",{attrs:{span:6}},[r("el-select",{attrs:{size:"small",clearable:"",placeholder:"请选择学年"},on:{change:t.searchStudent},model:{value:t.searchData.gradValue,callback:function(e){t.$set(t.searchData,"gradValue",e)},expression:"searchData.gradValue"}},[r("el-option",{attrs:{label:"2018学年",value:"2018"}}),r("el-option",{attrs:{label:"2019学年",value:"2019"}}),r("el-option",{attrs:{label:"2020学年",value:"2020"}}),r("el-option",{attrs:{label:"2021学年",value:"2021"}})],1)],1),r("el-col",{attrs:{span:6}},[r("el-select",{attrs:{size:"small",clearable:"",placeholder:"请选择系别"},on:{change:t.searchStudent},model:{value:t.searchData.dutyValue,callback:function(e){t.$set(t.searchData,"dutyValue",e)},expression:"searchData.dutyValue"}},t._l(t.dutyOptions,(function(t){return r("el-option",{key:t.duty,attrs:{label:t.duty,value:t.duty}})})),1)],1)],1)],1),r("el-table",{staticStyle:{"margin-top":"20px"},attrs:{stripe:"",border:"",data:t.studentsList.result}},[r("el-table-column",{attrs:{prop:"id",label:"学号",align:"center"}}),r("el-table-column",{attrs:{prop:"stu_name",label:"姓名",align:"center"}}),r("el-table-column",{attrs:{prop:"grad",label:"年级",align:"center"}}),r("el-table-column",{attrs:{prop:"class",label:"行政班",align:"center"}}),r("el-table-column",{attrs:{prop:"major",label:"专业",align:"center"}}),r("el-table-column",{attrs:{prop:"duty",label:"系别",align:"center"}}),r("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-tooltip",{attrs:{effect:"dark",content:"编辑",placement:"top-start",enterable:!1}},[r("el-button",{attrs:{type:"warning",icon:"el-icon-edit",size:"mini",plain:""},on:{click:function(r){return t.editStu(e.row.id)}}})],1),r("el-tooltip",{attrs:{effect:"dark",content:"删除",placement:"top-start",enterable:!1}},[r("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini",plain:""},on:{click:function(r){return t.delStu(e.row.id)}}})],1),r("el-tooltip",{attrs:{effect:"dark",content:"详情",placement:"top-start",enterable:!1}},[r("el-button",{attrs:{type:"info",icon:"el-icon-star-off",size:"mini",plain:""},on:{click:function(r){return t.detailByStu(e.row.id)}}})],1)]}}])})],1),r("el-pagination",{staticStyle:{"margin-top":"20px",display:"flex","justify-content":"end"},attrs:{"current-page":t.paramsInfo.pagenum,"page-sizes":[5,10,15,20],"page-size":t.paramsInfo.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1),r("edit-student",{ref:"editStudentRef",attrs:{"show-dialog":t.editStuDialog},on:{"update:showDialog":function(e){t.editStuDialog=e},"update:show-dialog":function(e){t.editStuDialog=e},editStudent:t.getAllStudents}}),r("add-student",{attrs:{"show-dialog":t.addStuDialog},on:{"update:showDialog":function(e){t.addStuDialog=e},"update:show-dialog":function(e){t.addStuDialog=e},addStudent:t.getAllStudents}})],1)},n=[],o=r("1da1"),l=(r("d3b7"),r("3ca3"),r("ddb0"),r("b64b"),r("d81d"),r("96cf"),r("b7e4")),u=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("el-dialog",{attrs:{title:"编辑学生",visible:t.showDialog,width:"40%"},on:{close:t.btnCancel}},[r("el-form",{ref:"editStudentRef",attrs:{model:t.editStudentForm,rules:t.editStudentRules,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"学号"}},[r("el-input",{attrs:{disabled:""},model:{value:t.editStudentForm.id,callback:function(e){t.$set(t.editStudentForm,"id",e)},expression:"editStudentForm.id"}})],1),r("el-form-item",{attrs:{label:"姓名",prop:"stu_name"}},[r("el-input",{model:{value:t.editStudentForm.stu_name,callback:function(e){t.$set(t.editStudentForm,"stu_name",e)},expression:"editStudentForm.stu_name"}})],1),r("el-form-item",{attrs:{label:"年级",prop:"grad"}},[r("el-input",{model:{value:t.editStudentForm.grad,callback:function(e){t.$set(t.editStudentForm,"grad",e)},expression:"editStudentForm.grad"}})],1),r("el-form-item",{attrs:{label:"行政班",prop:"class"}},[r("el-input",{model:{value:t.editStudentForm.class,callback:function(e){t.$set(t.editStudentForm,"class",e)},expression:"editStudentForm.class"}})],1),r("el-form-item",{attrs:{label:"系别",prop:"duty"}},[r("el-input",{model:{value:t.editStudentForm.duty,callback:function(e){t.$set(t.editStudentForm,"duty",e)},expression:"editStudentForm.duty"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:t.btnCancel}},[t._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:t.btnOk}},[t._v("确 定")])],1)],1)],1)},s=[],i=r("5f72"),d={props:{showDialog:{type:Boolean,default:!1}},data:function(){return{editStudentForm:{},editStudentRules:{stu_name:[{required:!0,message:"请输入姓名!",trigger:"blur"}],grad:[{required:!0,message:"请输入年级！",trigger:"blur"}],class:[{required:!0,message:"请输入行政班！",trigger:"blur"}],duty:[{required:!0,message:"请输入系别！",trigger:"blur"}]}}},methods:{btnOk:function(){var t=this;this.$refs.editStudentRef.validate(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Object(l["d"])(t.editStudentForm.id,t.editStudentForm);case 4:i["Message"].success("编辑学生信息成功！"),t.$emit("editStudent"),t.$emit("update:showDialog",!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},btnCancel:function(){this.editStudentForm={},this.$refs.editStudentRef.resetFields(),this.$emit("update:showDialog",!1)},editStudent:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(l["c"])(t);case 2:a=r.sent,e.editStudentForm=a.result;case 4:case"end":return r.stop()}}),r)})))()}}},c=d,m=r("2877"),p=Object(m["a"])(c,u,s,!1,null,"30498885",null),f=p.exports,g=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("el-dialog",{attrs:{title:"添加学生",visible:t.showDialog,width:"50%"},on:{close:t.btnCancel}},[r("el-form",{ref:"addStudentRef",attrs:{model:t.addStudentForm,rules:t.addStudentRules,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"学号",prop:"id"}},[r("el-input",{model:{value:t.addStudentForm.id,callback:function(e){t.$set(t.addStudentForm,"id",e)},expression:"addStudentForm.id"}})],1),r("el-form-item",{attrs:{label:"姓名",prop:"stu_name"}},[r("el-input",{model:{value:t.addStudentForm.stu_name,callback:function(e){t.$set(t.addStudentForm,"stu_name",e)},expression:"addStudentForm.stu_name"}})],1),r("el-form-item",{attrs:{label:"年级",prop:"grad"}},[r("el-input",{attrs:{placeholder:"(2018、2019、2020、2021)"},model:{value:t.addStudentForm.grad,callback:function(e){t.$set(t.addStudentForm,"grad",e)},expression:"addStudentForm.grad"}})],1),r("el-form-item",{attrs:{label:"行政班",prop:"class"}},[r("el-input",{model:{value:t.addStudentForm.class,callback:function(e){t.$set(t.addStudentForm,"class",e)},expression:"addStudentForm.class"}})],1),r("el-form-item",{attrs:{label:"专业",prop:"major"}},[r("el-input",{model:{value:t.addStudentForm.major,callback:function(e){t.$set(t.addStudentForm,"major",e)},expression:"addStudentForm.major"}})],1),r("el-form-item",{attrs:{label:"身份证",prop:"idCard"}},[r("el-input",{model:{value:t.addStudentForm.idCard,callback:function(e){t.$set(t.addStudentForm,"idCard",e)},expression:"addStudentForm.idCard"}})],1),r("el-form-item",{attrs:{label:"邮件",prop:"email"}},[r("el-input",{model:{value:t.addStudentForm.email,callback:function(e){t.$set(t.addStudentForm,"email",e)},expression:"addStudentForm.email"}})],1),r("el-form-item",{attrs:{label:"导师",prop:"advisor"}},[r("el-input",{model:{value:t.addStudentForm.advisor,callback:function(e){t.$set(t.addStudentForm,"advisor",e)},expression:"addStudentForm.advisor"}})],1),r("el-form-item",{attrs:{label:"辅导员",prop:"counsellor"}},[r("el-input",{model:{value:t.addStudentForm.counsellor,callback:function(e){t.$set(t.addStudentForm,"counsellor",e)},expression:"addStudentForm.counsellor"}})],1),r("el-form-item",{attrs:{label:"宿舍号",prop:"dormitory"}},[r("el-input",{model:{value:t.addStudentForm.dormitory,callback:function(e){t.$set(t.addStudentForm,"dormitory",e)},expression:"addStudentForm.dormitory"}})],1),r("el-form-item",{attrs:{label:"系别",prop:"duty"}},[r("el-input",{model:{value:t.addStudentForm.duty,callback:function(e){t.$set(t.addStudentForm,"duty",e)},expression:"addStudentForm.duty"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:t.btnCancel}},[t._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:t.btnOk}},[t._v("确 定")])],1)],1)],1)},b=[],h={props:{showDialog:{type:Boolean,default:!1}},data:function(){return{addStudentForm:{id:"",stu_name:"",grad:"",class:"",major:"",email:"",idCard:"",advisor:"",counsellor:"",dormitory:"",duty:""},addStudentRules:{id:[{required:!0,message:"请输入学号!",trigger:"blur"},{min:10,message:"学号长度最小为10！",trigger:"blur"}],stu_name:[{required:!0,message:"请输入姓名!",trigger:"blur"}],grad:[{required:!0,message:"请输入年级!",trigger:"blur"}],class:[{required:!0,message:"请输入行政班!",trigger:"blur"}],major:[{required:!0,message:"请输入专业!",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}],advisor:[{required:!0,message:"请输入导师!",trigger:"blur"}],counsellor:[{required:!0,message:"请输入辅导员!",trigger:"blur"}],duty:[{required:!0,message:"请输入系别!",trigger:"blur"}],dormitory:[{required:!0,message:"请输入宿舍号!",trigger:"blur"}],idCard:[{required:!0,message:"请输入身份证号",trigger:"blur"}]}}},methods:{btnCancel:function(){this.addStudentForm={},this.$refs.addStudentRef.resetFields(),this.$emit("update:showDialog",!1)},btnOk:function(){var t=this;this.$refs.addStudentRef.validate(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Object(l["a"])(t.addStudentForm);case 4:i["Message"].success("添加学生信息成功！"),t.$emit("addStudent"),t.$emit("update:showDialog",!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}},S=h,v=Object(m["a"])(S,g,b,!1,null,"1a4717aa",null),y=v.exports,x={components:{editStudent:f,addStudent:y},data:function(){return{paramsInfo:{query:"",pagenum:1,pagesize:10},total:0,studentsList:[],searchData:{gradValue:"",dutyValue:""},dutyOptions:[],editStuDialog:!1,addStuDialog:!1}},created:function(){this.getAllStudents(),this.getAllDuty()},methods:{getAllStudents:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(l["f"])(t.paramsInfo);case 2:r=e.sent,t.studentsList=r,t.total=r.count;case 5:case"end":return e.stop()}}),e)})))()},handleSizeChange:function(t){this.paramsInfo.pagesize=t,this.getAllStudents()},handleCurrentChange:function(t){this.paramsInfo.pagenum=t,this.getAllStudents()},getAllDuty:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(l["e"])();case 2:r=e.sent,t.dutyOptions=r.result;case 4:case"end":return e.stop()}}),e)})))()},searchStudent:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(l["h"])(t.searchData);case 2:r=e.sent,t.studentsList=r,t.total=r.count;case 5:case"end":return e.stop()}}),e)})))()},editStu:function(t){this.editStuDialog=!0,this.$refs.editStudentRef.editStudent(t)},delStu:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.$confirm("此操作将永久删除该学生, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(t){return t}));case 2:if(a=r.sent,"confirm"==a){r.next=5;break}return r.abrupt("return",i["Message"].info("已经取消删除！"));case 5:return r.next=7,Object(l["b"])(t);case 7:i["Message"].success("删除该学生成功！"),e.getAllStudents();case 9:case"end":return r.stop()}}),r)})))()},addStudent:function(){this.addStuDialog=!0},detailByStu:function(t){this.$router.push("/studentsList/detail/".concat(t))},excelExport:function(){var t=this,e={"学号":"id","名字":"stu_name","学年":"grad","行政班级":"class","专业":"major","系别":"duty","宿舍号":"dormitory","导师":"advisor","身份证":"idCard","辅导员":"counsellor","邮箱":"email"};Promise.all([r.e("chunk-71e3923d"),r.e("chunk-2d0cc0b6")]).then(r.bind(null,"4bf8")).then(function(){var r=Object(o["a"])(regeneratorRuntime.mark((function r(a){var n,o,u;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(l["g"])();case 2:n=r.sent,o=n.result,u=t.formatJson(e,o),a.export_json_to_excel({header:Object.keys(e),data:u,filename:"学生信息表",autoWidth:!0,bookType:"xlsx"});case 6:case"end":return r.stop()}}),r)})));return function(t){return r.apply(this,arguments)}}())},formatJson:function(t,e){return e.map((function(e){return Object.keys(t).map((function(r){return e[t[r]]}))}))}}},F=x,k=Object(m["a"])(F,a,n,!1,null,"5d53c4f4",null);e["default"]=k.exports},b7e4:function(t,e,r){"use strict";r.d(e,"f",(function(){return n})),r.d(e,"e",(function(){return o})),r.d(e,"h",(function(){return l})),r.d(e,"c",(function(){return u})),r.d(e,"d",(function(){return s})),r.d(e,"b",(function(){return i})),r.d(e,"a",(function(){return d})),r.d(e,"g",(function(){return c}));var a=r("b775");function n(t){return Object(a["a"])({url:"/admin/getAllStudents",method:"post",data:t})}function o(){return Object(a["a"])({url:"/admin/getAllDuty",method:"get"})}function l(t){return Object(a["a"])({url:"/admin/searchByStudents",method:"post",data:t})}function u(t){return Object(a["a"])({url:"/admin/editStudentById/".concat(t),method:"post"})}function s(t,e){return Object(a["a"])({url:"/admin/editStudentSubmit/".concat(t),method:"post",data:e})}function i(t){return Object(a["a"])({url:"/admin/delStudentById/".concat(t),method:"get"})}function d(t){return Object(a["a"])({url:"/admin/addStudentSubmit",method:"post",data:t})}function c(){return Object(a["a"])({url:"/admin/getAllStudentsByExcel",method:"get"})}}}]);