(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3109aa2a"],{"2ccf":function(e,t,r){"use strict";r.d(t,"d",(function(){return n})),r.d(t,"f",(function(){return i})),r.d(t,"c",(function(){return o})),r.d(t,"b",(function(){return c})),r.d(t,"a",(function(){return l})),r.d(t,"g",(function(){return s})),r.d(t,"e",(function(){return u}));var a=r("b775");function n(e){return Object(a["a"])({url:"/admin/getAllTeachers",method:"post",data:e})}function i(e){return Object(a["a"])({url:"/admin/getTeacherByNum/".concat(e),method:"get"})}function o(e,t){return Object(a["a"])({url:"/admin/editTeacherSubmit/".concat(e),method:"post",data:t})}function c(e){return Object(a["a"])({url:"/admin/delTeacherByNum/".concat(e),method:"get"})}function l(e){return Object(a["a"])({url:"/admin/addTeacher",method:"post",data:e})}function s(e){return Object(a["a"])({url:"/admin/saveTeacherInfo",method:"post",data:e})}function u(){return Object(a["a"])({url:"/admin/getAllTeachersByExcel",method:"get"})}},bf4c:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"dashboard-container"},[r("div",{staticClass:"app-container"},[r("page-tools",{attrs:{"show-before":!0}},[r("span",{attrs:{slot:"before"},slot:"before"},[e._v("共有"+e._s(this.total)+"名教师")]),r("template",{slot:"after"},[r("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.$router.push("./import?type=teacher")}}},[e._v("excel导入")]),r("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:e.excelExport}},[e._v("excel导出")]),r("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.$router.push("/teachersList/addTeacher")}}},[e._v("新增教师")])],1)],2),r("el-card",[r("el-row",[r("el-col",{staticStyle:{"margin-right":"35px"},attrs:{span:6}},[r("el-input",{attrs:{size:"small",placeholder:"请输入工号",clearable:""},on:{clear:e.getAllTeachers},model:{value:e.paramsInfo.query,callback:function(t){e.$set(e.paramsInfo,"query",t)},expression:"paramsInfo.query"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getAllTeachers},slot:"append"})],1)],1)],1),r("el-table",{staticStyle:{"margin-top":"20px"},attrs:{stripe:"",border:"",data:e.teachersList}},[r("el-table-column",{attrs:{prop:"num",label:"工号",align:"center"}}),r("el-table-column",{attrs:{prop:"name",label:"姓名",align:"center"}}),r("el-table-column",{attrs:{prop:"sex",label:"性别",align:"center"}}),r("el-table-column",{attrs:{prop:"duty",label:"系别",align:"center"}}),r("el-table-column",{attrs:{prop:"hire_form",label:"聘用形式",align:"center"}}),r("el-table-column",{attrs:{prop:"mobile",label:"手机号码",align:"center"}}),r("el-table-column",{attrs:{prop:"email",label:"邮箱",align:"center"}}),r("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tooltip",{attrs:{effect:"dark",content:"编辑",placement:"top-start",enterable:!1}},[r("el-button",{attrs:{type:"warning",icon:"el-icon-edit",size:"mini",plain:""},on:{click:function(r){return e.editTeacher(t.row.num)}}})],1),r("el-tooltip",{attrs:{effect:"dark",content:"删除",placement:"top-start",enterable:!1}},[r("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini",plain:""},on:{click:function(r){return e.delTeacher(t.row.num)}}})],1),r("el-tooltip",{attrs:{effect:"dark",content:"详情",placement:"top-start",enterable:!1}},[r("el-button",{attrs:{type:"info",icon:"el-icon-star-off",size:"mini",plain:""},on:{click:function(r){return e.$router.push("/teachersList/detail/"+t.row.num)}}})],1)]}}])})],1),r("el-pagination",{staticStyle:{"margin-top":"20px",display:"flex","justify-content":"end"},attrs:{"current-page":e.paramsInfo.pagenum,"page-sizes":[5,10,15,20],"page-size":e.paramsInfo.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),r("edit-teacher",{ref:"editTeacherRef",attrs:{"show-dialog":e.editTeacherDialog},on:{"update:showDialog":function(t){e.editTeacherDialog=t},"update:show-dialog":function(t){e.editTeacherDialog=t},updateTeachersList:e.getAllTeachers}})],1)},n=[],i=r("1da1"),o=(r("d3b7"),r("3ca3"),r("ddb0"),r("b64b"),r("d81d"),r("96cf"),r("2ccf")),c=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-dialog",{attrs:{title:"编辑教师",visible:e.showDialog,width:"40%"},on:{close:e.btnCancel}},[r("el-form",{ref:"editTeacherRef",attrs:{model:e.editTeacherForm,rules:e.editTeacherRules,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"工号"}},[r("el-input",{attrs:{disabled:""},model:{value:e.editTeacherForm.num,callback:function(t){e.$set(e.editTeacherForm,"num",t)},expression:"editTeacherForm.num"}})],1),r("el-form-item",{attrs:{label:"姓名",prop:"name"}},[r("el-input",{model:{value:e.editTeacherForm.name,callback:function(t){e.$set(e.editTeacherForm,"name",t)},expression:"editTeacherForm.name"}})],1),r("el-form-item",{attrs:{label:"性别",prop:"sex"}},[r("el-input",{model:{value:e.editTeacherForm.sex,callback:function(t){e.$set(e.editTeacherForm,"sex",t)},expression:"editTeacherForm.sex"}})],1),r("el-form-item",{attrs:{label:"系别",prop:"duty"}},[r("el-input",{model:{value:e.editTeacherForm.duty,callback:function(t){e.$set(e.editTeacherForm,"duty",t)},expression:"editTeacherForm.duty"}})],1),r("el-form-item",{attrs:{label:"聘用形式",prop:"hire_form"}},[r("el-input",{model:{value:e.editTeacherForm.hire_form,callback:function(t){e.$set(e.editTeacherForm,"hire_form",t)},expression:"editTeacherForm.hire_form"}})],1),r("el-form-item",{attrs:{label:"手机号码",prop:"mobile"}},[r("el-input",{model:{value:e.editTeacherForm.mobile,callback:function(t){e.$set(e.editTeacherForm,"mobile",t)},expression:"editTeacherForm.mobile"}})],1),r("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[r("el-input",{model:{value:e.editTeacherForm.email,callback:function(t){e.$set(e.editTeacherForm,"email",t)},expression:"editTeacherForm.email"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.btnCancel}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.btnOk}},[e._v("确 定")])],1)],1)],1)},l=[],s=r("61f7"),u=r("5f72"),m={props:{showDialog:{type:Boolean,default:!1}},data:function(){var e=function(e,t,r){Object(s["b"])(t)?r():r(new Error("手机号码格式不正确！"))};return{editTeacherForm:{},editTeacherRules:{name:[{required:!0,message:"姓名不能为空!",trigger:"blur"}],sex:[{required:!0,message:"性别不能为空！",trigger:"blur"}],duty:[{required:!0,message:"系别不能为空！",trigger:"blur"}],hire_form:[{required:!0,message:"聘用形式不能为空！",trigger:"blur"}],mobile:[{required:!0,message:"手机号码不能为空！",trigger:"blur"},{validator:e,trigger:"blur"}],email:[{required:!0,message:"邮箱不能为空！",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}]}}},methods:{editTeacherById:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(o["f"])(e);case 2:a=r.sent,t.editTeacherForm=a.result;case 4:case"end":return r.stop()}}),r)})))()},btnOk:function(){var e=this;this.$refs.editTeacherRef.validate(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,Object(o["c"])(e.editTeacherForm.num,e.editTeacherForm);case 4:u["Message"].success("编辑学生信息成功！"),e.$emit("updateTeachersList"),e.$emit("update:showDialog",!1);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},btnCancel:function(){this.editTeacherForm={},this.$refs.editTeacherRef.resetFields(),this.$emit("update:showDialog",!1)}}},d=m,p=r("2877"),h=Object(p["a"])(d,c,l,!1,null,"32370525",null),f=h.exports,b={components:{editTeacher:f},data:function(){return{teachersList:[],paramsInfo:{query:"",pagenum:1,pagesize:10},total:0,editTeacherDialog:!1}},created:function(){this.getAllTeachers()},methods:{getAllTeachers:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["d"])(e.paramsInfo);case 2:r=t.sent,e.teachersList=r.result,e.total=r.count;case 5:case"end":return t.stop()}}),t)})))()},handleSizeChange:function(e){this.paramsInfo.pagesize=e,this.getAllTeachers()},handleCurrentChange:function(e){this.paramsInfo.pagenum=e,this.getAllTeachers()},editTeacher:function(e){this.editTeacherDialog=!0,this.$refs.editTeacherRef.editTeacherById(e)},delTeacher:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$confirm("此操作将永久删除该教师, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(e){return e}));case 2:if(a=r.sent,"confirm"==a){r.next=5;break}return r.abrupt("return",u["Message"].info("已经取消删除！"));case 5:return r.next=7,Object(o["b"])(e);case 7:u["Message"].success("删除该教师成功！"),t.getAllTeachers();case 9:case"end":return r.stop()}}),r)})))()},excelExport:function(){var e=this,t={"工号":"num","姓名":"name","性别":"sex","部门":"duty","入职时间":"entry_time","聘用形式":"hire_form","最高学历":"education_bgc","籍贯":"native_place","政治面貌":"politics_status","手机":"mobile",QQ:"qq_number","微信":"wechat","邮箱":"email","现居住地":"address","通讯地址":"postal_address","学历类型":"degree_type","毕业学校":"graduate_school","毕业时间":"graduate_time","专业":"major"};Promise.all([r.e("chunk-71e3923d"),r.e("chunk-2d0cc0b6")]).then(r.bind(null,"4bf8")).then(function(){var r=Object(i["a"])(regeneratorRuntime.mark((function r(a){var n,i,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(o["e"])();case 2:n=r.sent,i=n.result,c=e.formatJson(t,i),a.export_json_to_excel({header:Object.keys(t),data:c,filename:"教师信息表",autoWidth:!0,bookType:"xlsx"});case 6:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}())},formatJson:function(e,t){return t.map((function(t){return Object.keys(e).map((function(r){return t[e[r]]}))}))}}},g=b,T=Object(p["a"])(g,a,n,!1,null,"dc46eca8",null);t["default"]=T.exports}}]);